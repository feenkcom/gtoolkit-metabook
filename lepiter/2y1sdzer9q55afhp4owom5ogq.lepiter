{
	"__schema" : "4.1",
	"__type" : "page",
	"children" : {
		"__type" : "snippets",
		"items" : [
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:48:06.187762+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:48:45.327795+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "GzfICNz1DQCgpUSACS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Now that we have a summary object, it makes sense to rethink the domain modeling, and refactor the implementation."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:48:49.335434+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:49:44.393948+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "mZVaC9z1DQCi7V+rCS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "We have a *metabook mapping* which tracks which database maps to which metadatabase, and which repos they reside it."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:49:45.914158+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:50:32.312967+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "TOm5Dtz1DQClX0mICS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "We have a *metabook registry* which allows us to easily look up the mapping from a database to its meta database etc."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T09:52:04.90492+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T09:52:39.542865+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "AboCF9z1DQCpOqyiCS7CMQ=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "— using an API — explicitly create a mapping and add it to the registry"
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T09:52:34.21495+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T09:54:34.733872+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "dvnBGNz1DQCrFCglCS7CMQ=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "— using annotations — have annotated methods that create and return a mapping, and are gathered by the registry on demand (reset and lazily load?). The annotated methods could be anywhere, or they could be extensions to the Mapping class."
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T11:26:17.757743+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T11:27:48.515002+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "u2zyZ931DQC0xV6aCS7CMQ=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "We can also do both ... In any case, to gather the pragmas and add them to the registry we need a way to update it. That's the API."
						}
					]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:50:35.653514+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:52:04.502193+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "g9+wEdz1DQCnrmnYCS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "We need an easy way to add new mappings to the registry. This could be either:"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T11:28:06.891235+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T12:38:04.375024+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "Talzbt31DQC3viIPCS7CMQ=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "We start by renaming the classes ..."
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T12:38:05.075728+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-12T10:21:47.69781+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "QuOuaN71DQCCmlf/DUSfpA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "We rename `GtMetabookMapping` to `GtMetabookRegistry` and `GtMetabookSummary` to {{gtClass:name=GtMetabookMapping}}. "
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T13:05:23.498121+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T13:05:31.751124+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "6lvpdt71DQCFWtwxDUSfpA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "GTBook example mapping:"
						},
						{
							"__type" : "pharoSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T13:02:41.585774+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-12T10:23:14.25971+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "P5+wwN71DQCHi5NTDUSfpA=="
							},
							"code" : "GtMetabookExamples new gtBookMapping"
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T13:41:27.969275+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-09T13:53:13.988125+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "x0Vozt71DQCIj0N0DUSfpA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "We move responsibilities from the registry to the mappings. We simplify the dictionaries to return a mapping, and rewrite the registry methods to use the new dictionary format."
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "textSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:06:53.542235+02:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:22:09.474139+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "MH6sbd71DQCDmyp3DUSfpA=="
										},
										"paragraphStyle" : {
											"__type" : "textStyle"
										},
										"string" : "It seems overkill to have a separate registry class, so let's  move all the global query methods to the class side of {{gtClass:name=GtMetabookMapping}}. Then we'll harness the registry methods to the mapping object, and finally deprecate them all in favour of the class methods."
									},
									{
										"__type" : "pharoSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:08:31.613389+02:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:22:17.581213+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "f9dYqxj2DQChjpxsBPAcZw=="
										},
										"code" : "GtMetabookMapping mappings"
									},
									{
										"__type" : "textSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:08:29.465154+02:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2025-07-12T10:08:29.465154+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "mUoYqxj2DQChdoxlBPAcZw=="
										},
										"paragraphStyle" : {
											"__type" : "textStyle"
										},
										"string" : ""
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-12T10:07:03.864811+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2025-07-12T10:07:05.049354+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "yucdphj2DQCccspmBPAcZw=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "# Unification"
						}
					]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:54:59.346462+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T11:28:01.077349+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "eFECIdz1DQCwNMeCCS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "# Refactoring"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:53:49.646843+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-09T09:53:49.646843+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "bPlAHdz1DQCuCAs6CS7CMQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : ""
			}
		]
	},
	"createEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"createTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2025-07-09T09:48:06.126736+02:00"
		}
	},
	"editEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"editTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2025-07-09T09:48:06.126736+02:00"
		}
	},
	"pageType" : {
		"__type" : "namedPage",
		"title" : "Reifying the mapping"
	},
	"uid" : {
		"__type" : "uuid",
		"uuid" : "1a41c708-dcf5-0d00-a0a4-dd36092ec231"
	}
}